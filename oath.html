<!doctype html>
<html>
  <head>
    <script src="https://cdn.bootcdn.net/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.3.4/vconsole.min.js"></script>
	<script >
	  function getQueryStringByName(name){
		var result = location.search.match(new RegExp("[\?\&]" + name+ "=([^\&]+)","i"));
		if(result == null || result.length < 1){
         return "";
		}
		return result[1];
	  }
	</script>
  </head>
  <body>
	<script>
	  new VConsole();
	  var code = getQueryStringByName('code')
	  if (code) {
        alert(code)
		$.get(
		  'http://localhost:3000/third/wework/get-user-by-code',
		  'code=' + code,
		  function (data) {
			console.log(data)
		  }
		)
      } else {
		alert('no code')
		var base = 'https://open.weixin.qq.com/connect/oauth2/authorize?'
		var appid = 'appid=ww3605c33768ad7b5d'
		var url = encodeURIComponent('http://github.hskhub.com/oath.html')
		var redirect_uri = '&redirect_uri=' + url
		var other = '&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect'
		window.location = base + appid + redirect_uri + other
	  }
	</script>
  </body>
</html>